<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <defs>
    <g id="image-loading-bar-{{$id}}">
        <rect ng-attr-width="{{vm.imageBarWidth}}%" height="100%"/>
    </g>
    </defs>

    <!-- Image Bars -->
    <use xlink:href="" ng-attr-xlink:href="{{'#image-loading-bar-'+$parent.$id}}"
        ng-repeat="i in [0, vm.imageCount] | range track by $index"
        ng-attr-x="{{vm.imageBarWidth*i}}%" 
        ng-attr-class="wv-loadingbar-image-bar wv-loadingbar-{{vm.QualityKeys[vm.bestQualityByImage[i]] ? vm.QualityKeys[vm.bestQualityByImage[i]]+'-quality' : 'not-loaded'}}" 
        ng-click="vm.series.goToImage(i)"
        y="2px"
    />

    <!-- Current Image Bar -->
    <use xlink:href="" ng-attr-xlink:href="{{'#image-loading-bar-'+$parent.$id}}"
        ng-if="vm.imageBarWidth"
        ng-attr-x="{{vm.imageBarWidth*vm.currentImageIndex}}%" 
        ng-attr-class="wv-loadingbar-image-bar wv-loadingbar-{{vm.QualityKeys[vm.bestQualityByImage[vm.currentImageIndex]] ? vm.QualityKeys[vm.bestQualityByImage[vm.currentImageIndex]]+'-quality' : 'not-loaded'}} wv-loadingbar-active" ng-click="vm.series.goToImage(vm.currentImageIndex)"
        y="0px"
    />
 </svg>

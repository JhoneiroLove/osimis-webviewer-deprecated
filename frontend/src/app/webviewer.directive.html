<wv-layout
    wv-topleft-enabled="$isTopLeftEnabled"
    wv-topright-enabled="$isTopRightEnabled"
    wv-right-enabled="$isRightEnabled"
>
    <!--
    Layout: top zones (1, 2, 3 and 4)
    -->
    <wv-layout-top
        wv-enabled="$isTopLeftEnabled || $isTopRightEnabled"
    >
        <!--
        Layout: top-left

        @description
        Parameterizable zone.
        The user of the `wvWebviewer` directive can inject content here. For
        instance, a button to quit the application, or a study list.
        
        @example
        ```html
        <wv-webviewer ...>
            <wv-layout-top-left>
                User content here...
            </wv-layout-top-left>
        </wv-webviewer>
        ```
        -->
        <wv-layout-top1 ng-transclude="wvLayoutTopLeft"></wv-layout-top1>

        <!--
        Layout: top2
    
        @description
        @todo
        -->
        <wv-layout-top2>
        </wv-layout-top2>

        <!--
        Layout: top3
    
        @description
        Zone containing the study information.
        -->
        <wv-layout-top3>
            <wv-study-information-breadcrumb
                wv-study-id="vm.studyId"
                class="clearfix"
            ></wv-study-information-breadcrumb>
        </wv-layout-top3>

        <!--
        Layout: top-right
        
        @description
        Parameterizable zone.
        The user of the `wvWebviewer` directive can inject content here. For
        instance, additional controls to let the wvb interact with an host app.

        @example
        ```html
        <wv-webviewer ...>
            <wv-layout-top-right>
                User content here... For instance buttons:
                <button
                    bs-tooltip
                    data-placement="bottom"
                    title="Viewer mode"
                    class="wvViewer__button"
                    ng-click="vm.hideEditor()"
                    ng-class="{'active': !vm.isEditorShown}"
                >
                    <span class="glyphicon glyphicon-eye_open"></span>
                </button>
                <button
                    bs-tooltip
                    data-placement="bottom"
                    title="Editor mode"
                    class="wvViewer__button"
                    ng-click="vm.showEditor()"
                    ng-class="{'active': vm.isEditorShown}"
                >
                    <span class="glyphicon glyphicon-notes"></span>
                </button>
            </wv-layout-top4>
        </wv-webviewer>
        ```
        -->
        <wv-layout-top4 ng-transclude="wvLayoutTopRight">
        </wv-layout-top4>
    </wv-layout-top>

    <!--
    Layout: left
    
    @description
    Zone containing the study's information and the list of series.
    -->
    <wv-layout-left
        wv-enabled="vm.serieslistEnabled || vm.studyinformationEnabled"
        wv-handles-enabled="vm.leftHandlesEnabled"
    >
        <!-- Study Picker -->
        <wv-studylist 
            ng-if="vm.serieslistEnabled"
            wv-selected-study-id="vm.studyId"
            wv-selected-study-ids="vm.selectedStudyIds"
        ></wv-studylist>

        <div
            ng-if="vm.studyinformationEnabled || vm.serieslistEnabled"
            ng-repeat="$studyId in vm.selectedStudyIds"
        >
            <!-- Study's information -->
            <section
                ng-if="vm.studyinformationEnabled"
                class="wvAsideLeft__information fontColor__white"
            >
                <h3 class="h2 pt10">Study Information</h3>
                <wv-study-information
                    wv-study-id="$studyId"
                    class="clearfix"
                ></wv-study-information>
            </section>
            <!-- List of series -->
            <section
                ng-if="vm.serieslistEnabled"
                class="wvAsideLeft__serie fontColor__white wv-h pt10"
            >
                <h3 class="h2 mtn">List of Series</h3>
                <wv-reportlist
                    wv-study-id="$studyId"
                    wv-selection-enabled="vm.seriesItemSelectionEnabled"
                    wv-selected-report-ids="vm.selectedReportIds[$studyId]"
                ></wv-reportlist>
                <wv-videolist
                    wv-study-id="$studyId"
                    wv-selection-enabled="vm.seriesItemSelectionEnabled"
                    wv-selected-video-ids="vm.selectedVideoIds[$studyId]"
                ></wv-videolist>
                <wv-serieslist
                    wv-study-id="$studyId"
                    wv-selection-enabled="vm.seriesItemSelectionEnabled"
                    wv-selected-series-ids="vm.selectedSeriesIds[$studyId]"
                ></wv-serieslist>
            </section>
        </div>

        <!--
        Layout: left bottom
        
        @description
        Parameterizablee zone.
        The user of the `wvWebviewer` directive can inject content here and
        configure advanced display options. Have a look at the `wvLayoutLeftBottom` 
        directive for the advanced configuration.
        -->
        <ng-transclude
            ng-transclude-slot="wvLayoutLeftBottom"
        >   
            <!-- Default layout left bottom disabled -->
            <wv-layout-left-bottom
                ng-init="falseValue = false"
                wv-enabled="falseValue"
            >
            </wv-layout-left-bottom>
        </ng-transclude>
    </wv-layout-left>

    <!--
    Layout: right
    
    @description
    Parameterizable zone.
    The user of the `wvWebviewer` directive can inject content here and
    configure advanced display options. Have a look at the `wvLayoutRight` 
    directive for the advanced configuration.

    @todo ng-if to make sure javascript is loaded after layout-main one's

    @example
    ```html
    <wv-webviewer ...>
        <wv-layout-right>
            User content here...
        </wv-layout-right>
    </wv-webviewer>
    ```
    -->
    <ng-transclude
        ng-transclude-slot="wvLayoutRight"
    >   
        <!-- Default layout right disabled -->
        <wv-layout-right
            ng-init="falseValue = false"
            wv-enabled="falseValue"
        >
        </wv-layout-right>
    </ng-transclude>

    <!--
    Layout: bottom

    @description
    This zone contains the notices.
    -->
    <wv-layout-bottom
        wv-enabled="vm.noticeEnabled"
    >
        <wv-notice
            ng-if="vm.noticeEnabled"
            wv-content="vm.noticeText"
            wv-on-close="vm.noticeEnabled = false"
        ></wv-notice">
    </wv-layout-bottom>

    <!--
    Layout: main

    @description
    This zone contains the viewports & the toolbar.
    -->
    <wv-layout-main>
        <!--
        Toolbar
        -->
        <wv-toolbox 
            ng-show="vm.toolbarEnabled"
            wv-readonly="vm.readonly"
            wv-toolbox-buttons="vm.tools"
            wv-active-tool="vm.activeTool"
        ></wv-toolbox>

        <!--
        Splitpane
        -->
        <wv-splitpane
            wv-layout="vm.tools.layout"

            ng-class="{
                'wvLayout__splitpane--toolbarpadding': vm.toolbarEnabled
            }"
        >
             <wv-pane-policy
                wv-pane-index="$index"
                wv-pane-position="$position"
                wv-on-pane-added="vm.configureViewport($index)"
                wv-on-pane-removed="vm.cleanupViewport($index)"

                wv-on-item-dropped="
                    vm.viewports[$index].reportId   = $data.reportId !== undefined   ? $data.reportId   : vm.viewports[$index].reportId;
                    vm.viewports[$index].videoId    = $data.videoId !== undefined    ? $data.videoId    : vm.viewports[$index].videoId;
                    vm.viewports[$index].seriesId   = $data.seriesId !== undefined   ? $data.seriesId   : vm.viewports[$index].seriesId;
                    vm.viewports[$index].imageIndex = $data.imageIndex !== undefined ? $data.imageIndex : vm.viewports[$index].imageIndex;
                    vm.viewports[$index].csViewport = $data.csViewport !== undefined ? $data.csViewport : vm.viewports[$index].csViewport;
                "
             >
                <!--
                PDF Report
                -->
                <wv-pdf-viewer
                    ng-if="vm.viewports[$index].reportId"
                    wv-report-id="vm.viewports[$index].reportId"
                ></wv-pdf-viewer>

                <!--
                Video
                -->
                <wv-video
                    ng-if="!!vm.viewports[$index].videoId"
                    wv-video-id="vm.viewports[$index].videoId"
                ></wv-video>

                <!--
                Viewport
                -->
                <wv-viewport
                    ng-if="!!vm.viewports[$index].seriesId"
                    vp:series-id="vm.viewports[$index].seriesId" wv-size="{width: 1.0, height: 1.0}" wv-lossless="true"
                    wv-series="$series" wv-image="$image"
                    wv-droppable-series-ext="!vm.readonly && vm.serieslistEnabled"
                    wv-scroll-on-wheel-series-ext="!vm.readonly"
                    wv-viewport="vm.viewports[$index].csViewport"
                    wv-image-index="vm.viewports[$index].imageIndex"

                    wv-mobile-viewport-tool="!vm.readonly && vm.mobileInteraction"
                    wv-windowing-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.windowing"
                    wv-angle-measure-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.anglemeasure"
                    wv-length-measure-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.lengthmeasure"
                    wv-elliptical-roi-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.ellipticalroi"
                    wv-zoom-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.zoom"
                    wv-pan-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.pan"
                    wv-pixel-probe-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.pixelprobe"
                    wv-rectangle-roi-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.rectangleroi"

                    wv-invert-contrast-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.invert"

                    wv-rotateleft-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.rotateleft"
                    wv-rotateright-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.rotateright"
                    wv-vflip-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.vflip"
                    wv-hflip-viewport-tool="!vm.readonly && !vm.mobileInteraction && vm.tools.hflip"
                >
                    <!--
                    Overlay
                    -->
                    <wv-overlay ng-if="vm.tools.overlay" wv-tags="$image.tags" wv-viewport="vm.viewports[$index].csViewport"></wv-overlay>

                    <!--
                    Timeline.

                    Always show the timeline — even if there is only 
                    one image — until we develop a specific component 
                    to display the image quality
                    -->
                    <div class="wv-overlay-timeline-wrapper">
                        <wv-timeline wv-series="$series" wv-readonly="vm.readonly"></wv-timeline>
                    </div>
                </wv-viewport>

                <!--
                Notice: droppable zone
                -->
                <wv-droppable-series-overlay-item
                    ng-if="
                        !vm.viewports[$index].videoId &&
                        !vm.viewports[$index].seriesId
                    "
                ></wv-droppable-series-overlay-item>
            </wv-pane-policy>
        </wv-splitpane>
    </wv-layout-main>

</wv-layout>

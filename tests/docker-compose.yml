version: "2"
services:
    orthanc:
        image: osimis/orthanc-webviewer-plugin/test:${releaseCommitId}
        expose:
            - "8042"
    test_cpp:
        image: osimis/orthanc-webviewer-plugin/test:${releaseCommitId}
        entrypoint: /root/OsimisViewerUnitTests
        command: [ ]
    test_js:
        build:
            context: ..
            dockerfile: DockerfileTestRunner
        image: osimis/orthanc-webviewer-plugin/test-js:${releaseCommitId} # set a name for debugging purpose
        environment:
            - ORTHANC_URL=http://orthanc:8042/
        expose:
            - "9876"
        links:
            - orthanc # for depends_on https://github.com/docker/compose/blob/129092b7/docs/yml.md#links

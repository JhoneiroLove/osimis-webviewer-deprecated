<svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
    <style>
        .image-bar {
            cursor: pointer;
            transition: fill 250ms, transform 250ms;
        }
        .not-loaded {
            fill: rgba(255, 255, 255, 0.1);
        }
        .not-loaded, .LOW-quality {
            transition: none;
        }
        .not-loaded:hover, .active {
            fill: rgba(255, 255, 255, 0.2);
        }
        .LOSSLESS-quality {
            fill:rgba(0, 255, 0, 0.7);
        }
        .LOSSLESS-quality:hover, .LOSSLESS-quality.active {
            fill:rgba(0, 255, 0, 1);
        }
        .LOW-quality {
            fill:rgba(255, 0, 0, 0.7);
        }
        .LOW-quality:hover, .LOW-quality.active {
            fill:rgba(255, 0, 0, 1);
        }
        .MEDIUM-quality {
            fill:rgba(255, 95, 0, 0.7);
        }
        .MEDIUM-quality:hover, .MEDIUM-quality.active {
            fill:rgba(255, 95, 0, 1);
        }

        .active {
            /*transform: rotateZ(5deg);*/
        }
    </style> 
    <defs>
    <g id="image-loading-bar-{{$id}}">
        <rect ng-attr-width="{{vm.imageBarWidth}}%" height="100%"/>
    </g>
    </defs>

    <!-- Image Bars -->
    <use xlink:href="" ng-attr-xlink:href="{{'#image-loading-bar-'+$parent.$id}}"
        ng-repeat="i in [0, vm.imageCount] | range track by $index"
        ng-attr-x="{{vm.imageBarWidth*i}}%" 
        ng-attr-class="image-bar {{vm.QualityKeys[vm.bestQualityByImage[i]] ? vm.QualityKeys[vm.bestQualityByImage[i]]+'-quality' : 'not-loaded'}}" 
        ng-click="vm.serie.goToImage(i)"
        y="2px"
    />

    <!-- Position Helper -->
    <use xlink:href="" ng-attr-xlink:href="{{'#image-loading-bar-'+$parent.$id}}"
        ng-if="vm.imageBarWidth"
        ng-attr-x="{{vm.imageBarWidth*vm.currentImageIndex}}%" 
        ng-attr-class="image-bar {{vm.QualityKeys[vm.bestQualityByImage[vm.currentImageIndex]] ? vm.QualityKeys[vm.bestQualityByImage[vm.currentImageIndex]]+'-quality' : 'not-loaded'}} active" ng-click="vm.serie.goToImage(vm.currentImageIndex)"
        y="0px"
    />

 </svg>

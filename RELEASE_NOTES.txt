Pending changes in the mainline
===============================

=> Minimum Orthanc version: 1.3.1 <=

Features:
--------
* All annotations are now editable when any annotation tool is selected
* Added new real angle tool (there are now 2 angle tools: simple angle and lines angle)
* Added synchronized browsing
* Added options to configure the keyboard shortcuts ("KeyboardShortcuts" + "KeyboardShortcutsEnabled")
* Added a combined tool that can handle 3 tools on mouse and/or touch gestures ("CombinedToolBehaviour")
* Added an option to configure the mouse behaviour for the windowing tool ("WindowingBehaviour")
* Added an option to preload high quality images on the frontend before the user needs them.
* Added orientation markers
* Added arrow+text annotations
* Added key image capture to store snapshots with annotation
* Windows presets can be configured in configuration file
* Added a "Not for diagnostic usage" disclaimer since this viewer is not CE marked or FDA approved
* Added options to configure the viewer UI:
  "StudyDownloadEnabled", "VideoDisplayEnabled", "AnnotationStorageEnabled",
  "KeyImageCaptureEnabled", "ShowStudyInformationBreadcrumb",
  "ShowNoReportIconInSeriesList", "ReduceTimelineHeightOnSingleFrameSeries",
  "ToolbarLayoutMode", "ToolbarButtonSize", "WindowingPresets",
  "DefaultSelectedTool", "DefaultStudyIslandsDisplayMode",
  "DefaultLanguage"
* Added a one-column display mode for the study island
* Added internationalization support (en-fr)
* Added a tool to show/hide overlay text/icons
* Added a loading spinner
* WVP-139: added ability to play series in both directions


Fixes:
-----
* Scrolling with wheel mouse: when reaching the end of a series, go back to the other end (this worked only in one direction)
* Magnifying glass not always on top of image
* WVB-312 + WVB-120: Wrong measurements in US and XA
* WVB-330: WW/WL not working in IE 11
* WVB-326: support for RGB48 images
* WVB-293: support for YBR422 images
* WVB-341: WindowingPresets are not visible
* VS-192: ShortTermCache: invalidate instances when instance is received in case it is a 'resend' of an instance with modification (i.e. same image is uploaded again with rotation/flip)
* WVP-142: Windowing: Ignore slope/intercept if PhotometricInterpretation is RGB


Improvements:
------------
* speed-up initial study/series loading time.


Experimental features:
---------------------
* Added a short term cache to store low/high quality images in the backend. 
  To enable it, check the "ShortTermCache..." configurations.
* Added prefetching on the backend to pre-compute low/high quality images
  before the frontend requests them.  To enable it, check the 
  "ShortTermCachePrefetchOnInstanceStored" configuration.
* Added the ability to display custom icons in overlay


Known issues:
------------
* The WebViewer currently does not work on iPhone (Safari and Chrome).
* WVB-370: US images whose transfer syntax is JPEG are not displayed correctly (this issue was already affecting earlier versions)

Remarks:
-------
* internal API has changed, especially the osimis-viewer/series route.

Version 1.0.2
========================

=> Minimum Orthanc version: 1.1.0 <=

Fixes:
-----
* Annotation readback


Version 1.0.1
========================

=> Minimum Orthanc version: 1.1.0 <=

Fixes:
* WVB-312: US and XA measures are invalid


Version 1.0.0
========================

=> Minimum Orthanc version: 1.1.0 <=

Features:
* Zoom in the viewport using a magnifying glass.
* Apply windowing preset.

Version 0.9.1
========================

=> Minimum Orthanc version: 1.1.0 <=

Features:
* Added a route to retrieve resized/resampled/recompressed images (i.e:
  osimis-viewer/images/<instance-uid>/<frame-id>/8bit/invert-monochrome1/jpeg:90
  osimis-viewer/images/<instance-uid>/<frame-id>/resize:256/8bit/png

Fixes:
* Enhance default windowing algorithm.

Version 0.9.0
========================

=> Minimum Orthanc version: 1.1.0 <=

Features:
* Compare the current study with other studies from the same patients.
* Select a viewport and apply flip/rotate/color inversion tools to it.
* Support for windows touchscreen.
* Support 1x2 and 2x1 viewport grid layout.
* Enhance overall interface:
  - Display consulted series.
  - Show the list of series as a grid.
  - Display the selected viewport's study data in the top bar.
  - ...

Fixes:
* Prevent double tooltip (text indicators for buttons) display.
* Display studies containing incompatible series.
* Use 3 fingers to change windowing instead of 2 on mobile.
* Support for MONOCHROME1 photometric interpolation.
* Enhance windowing tool ergonomy on images with high dynamic.
* Support default windowing for compressed dicom images without windowing tags.
* Parse DICOM instances whose `DICM` header at [128..131] does not exist.
* Keep the same images' displayed zones when the window is resized.

Breaking Changes:
* New routes used:
  - /<orthanc>/patients/<patient-uid>
  - /<orthanc>/instances/<instance-uid>/study
  - /<orthanc>/series/<instance-uid>/study
* Internal calls to orthanc routes are now routed to other plugins.

Version 0.8.0
========================

=> Minimum Orthanc version: 1.1.0 <=

Features:
* Watch MPEG-4 (non-bd) video embedded in DICOM instances.
  Videos do not load on Mobile and Safari.

Options:
  - `VideoDisplayEnabled` option is now available in the orthanc config file.

Breaking Changes:
* New routes used:
  - /<orthanc>/instances/<video-instance-uid>/frames/0/raw

Version 0.7.0
========================

=> Minimum Orthanc version: 1.1.0 <=

Features:
* Store annotations in the backend (disabled by default)
  - Warning: Annotations are overriden when multiple users edit annotations from
  the same study at the same time.
  - New parameter `AnnotationStorageEnabled` in the backend config file 
  
Fixes:
* Prevent instances with lot of images to stuck the viewer

Optimization:
* Improved overall performance
* Increase thumbnail image quality. Quality: from 80% to 100%. Resolution: from 150x150 to 300x300.

Version 0.6.1
========================

=> Minimum Orthanc version: 1.1.0 <=

* Docker Image: set Orthanc version to 1.2.0 and removed Authentication by default.

Version 0.6.0
========================

=> Minimum Orthanc version: 1.1.0 <=

Usability:
* Enhance overall user interface
  warning: the 2x1 and 1x2 grid mode have been removed for now
* Change the shown thumbnail image from the first series' instance to the middle one
* Set default tool to zoom instead of windowing
* Provide tooltip helpers for the toolbar
* Pinch to zoom on mobile
* Move 3 fingers to change windowing on mobile
* Optimise mobile display on portrait and landscape mode

Features:
* Display PDF embedded in DICOM instances

Optimization:
* Bypass images recompression when image is already compressed within DICOM

Bug fixes:
* Play series with Safari Mobile
* Embed fonts instead of relying on CDN
* Display precompressed instance images on mobile and EDGE
* Display series in order
* Fit images to the viewports
* Keep viewport settings when browser's window is resized
* Display zoom based on image's full resolution

Breaking Changes:
* `plugin-entrypoint.html` has been renamed to `index.html`
* New parameter `StudyDownloadEnabled` in the backend config file
* New routes used:
  - /<orthanc>/instances/<instance-uid>/pdf
  - /osimis-viewer/app/config.js
  Have a look at the `/procedures/develop-auth-proxy.md` document.

Version 0.5.5
========================

=> Minimum Orthanc version: 1.1.0 <=

* Docker Image: Changed the orthanc.json included in the image.  By default, Orthanc is now accessible from outside the container ("RemoteAccessAllowed": true).
* Fix crash in Chrome when displaying color JPEG images.

Version 0.5.4
========================

=> Minimum Orthanc version: 1.1.0 <=

* Docker Image: Updated Orthanc to 1.2.0 

Version 0.5.3
========================

=> Minimum Orthanc version: 1.1.0 <=

* Optimize client code in release mode
* Improve compatibility with DICOM SR
* Fix orthanc crash on some bad http routes
* Enhance progressive image loading algorithm:
  - Always load thumbnail quality except on small already-compressed dicom
* Reduce simplified-tags requests at study loading: load them during series loading
* Fix preloader: reduce loading priority or cancel download on series/image switch
* Improve Safari compatibility
* Improve IE11+ compatibility

Version 0.5.2
========================

=> Minimum Orthanc version: 1.1.0 <=

* Enhance compatibility with reverse proxies
* Remove memory leaks
* Handle multiple-value DICOM tags for WindowWidth and WindowCenter: use the first value of each one

Version 0.5.1
========================

=> Minimum Orthanc version: 1.1.0 <=

* Adapt front-end versions
* Remove the series id from overlay

Version 0.5
========================

=> Minimum Orthanc version: 1.1.0 <=

* Support of Safari
* Move the play button to timelines
* Provide play framerate configuration via a panel appearing when the mouse is 
  on top of the play button
* Rename the JSON configuration file option "EnableGdcm" to "GdcmEnabled"
* Fix hidden timeline when using Orthanc's "Osimis Web Viewer" button on series
* Minor optimizations
* Minor memory optimization

Internal API changes
* Add a wv-webviewer component to simplify the use of the web viewer as a library
* config.js no longer need to be embeded at the root of projects using osimis-webviewer
  as a JavaScript library
* event renamed from "UserSelectedSeries" to "UserSelectedSeriesId", now takes an id
  instead of a series as a parameter
* event renamed from "UserUnSelectedSeries" to "UserUnSelectedSeriesId", now takes an id
  instead of a series as a parameter
* wv-serieslist and wv-studylist components now takes "study-id" instead of "study"
  as a parameter
* wv-splitpane no longer provide a viewport by default
* wv-splitpane no longer wait for timeout before changing its layout
* wv-splitpane interface has been completely rewritten (see source code)
* wv-series-id viewport argument has been temporary renamed into vp-series-id
  due to name collision
* wv-scrollbar-overlay-item has been removed in favor of wv-loadingbar and
  wv-timeline

Version 0.4
========================

=> Minimum Orthanc version: 1.1.0 <=

* Initial release based on Orthanc WebViewer version 2.2
* Complete rewrite of the frontend code
* Implement frontend image caching & preloading
* Add standard tools
* Implement progressive image loading
* Bypass plugin compression when the dicom pixeldata are already compressed
* Support of multiple viewport
* Replace the backend memory-located cache by a backend disk-located cache
* Upgrade to Boost 1.60.0 for static builds

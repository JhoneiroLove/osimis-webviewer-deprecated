<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Osimis Web Viewer</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width">
    
    <link rel="stylesheet" href="styles/vendor.css">
    <link rel="stylesheet" href="styles/webviewer.components.css">
    <link rel="stylesheet" href="styles/webviewer.main.css">
  </head>
  <body ng-app="orthanc">
    <div ng-controller="OsimisWebViewer" class="wv-container">
        <wv-toolbar wv-items="toolbar" ng-if="minimize"></wv-toolbar>
        <div style="height: calc(100% - 40px)" wv-size-tag ng-if="minimize">
            <wv-viewport wv-viewport-serie="serie" wv-width="'tag'" wv-height="'tag'"
                wv-viewport-mouse-events wv-scroll-on-wheel="true"
                wv-enable-overlay="toolbar.overlay"

                wv-tool-zoom="toolbar.zoom"
                wv-tool-pan="toolbar.pan"
                wv-tool-lengthmeasure="toolbar.lengthmeasure"
                wv-tool-anglemeasure="toolbar.anglemeasure"
                wv-tool-pixelprobe="toolbar.pixelprobe"
                wv-tool-ellipticalroi="toolbar.ellipticalroi"
                wv-tool-rectangleroi="toolbar.rectangleroi"
                wv-state-invert="toolbar.invert"
                wv-state-play="toolbar.play"
            ></wv-viewport>
        </div>

        <div class="wv-menu" ng-if="!minimize">
            <wv-serielist wv-study="study"></wv-serielist>
        </div>
        <div class="wv-main" ng-if="!minimize">
            <wv-toolbar wv-items="toolbar"></wv-toolbar>
            <wv-splitpane wv-layout="toolbar.layout" wv-settings="toolbar"></wv-splitpane>
        </div>
    </div>

    <script src="scripts/vendor.js"></script>
    <script src="scripts/webviewer.components.js"></script>
    <script src="scripts/webviewer.main.js"></script>
    <script src="config.js"></script>

    <script>
        angular.module('orthanc', ['webviewer'])
        .config(function($locationProvider, wvConfigProvider) {
            wvConfigProvider.setApiURL(window.orthancUrl);
            
            $locationProvider.html5Mode({
                enabled: true,
                requireBase: false
            });
        })
        .controller('OsimisWebViewer', function($scope, $location) {
            $scope.toolbar = {
                zoom: false,
                pan: false,
                invert: false,
                lengthmeasure: false,
                anglemeasure: false,
                pixelprobe: false,
                ellipticalroi: false,
                rectangleroi: false,
                play: false,
                overlay: true
            };

            $scope.serie = {
                id: $location.search().series
            };

            $scope.study = {
                id: $location.search().study
            };

            $scope.minimize = !$scope.study.id;
        })
        ;
    </script>
</body>
</html>
